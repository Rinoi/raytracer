/*
** new_lux.c for rt in /home/mart_p//raytracer
** 
** Made by louis martin-pierrat
** Login   <mart_p@epitech.net>
** 
** Started on  Mon Jun  3 23:35:43 2013 louis martin-pierrat
** Last update Thu Jun  6 15:49:46 2013 louis martin-pierrat
*/

#include	"rt.h"

void		new_lux(t_lux **lux, struct s_xml *tree)
{
  t_lux		*new;
  t_lux		*tmp;

  tmp = (*lux);
  new = xmalloc(sizeof(t_lux));
  get_fvalue(tree, "lux", &new->lux) == FAILURE ? new->lux = 1 : 0;
  get_fvalue(tree, "red", &new->red) == FAILURE ? new->red = 1 : 0;
  get_fvalue(tree, "blue", &new->blue) == FAILURE ? new->blue = 1 : 0;
  get_fvalue(tree, "green", &new->green) == FAILURE ? new->green = 1 : 0;
  get_ivalue(tree, "color", &new->color) == FAILURE ? new->color = 0xFFFFFF : 0;
  get_fvalues(tree, "coord", "x", &new->cord.x) == FAILURE ? new->cord.x = -200 : 0;
  get_fvalues(tree, "coord", "y", &new->cord.y) == FAILURE ? new->cord.y = 0 : 0;
  get_fvalues(tree, "coord", "z", &new->cord.z) == FAILURE ? new->cord.z = 0 : 0;
  get_ivalue(tree, "attribute", &new->attribute) == FAILURE ? new->attribute = NONE : 0;
  new->next = NULL;
  add_to_end(lux, new);
}
